<%= render Panda::Core::Admin::ContainerComponent.new do |component| %>
  <% component.with_heading_slot(text: "Redirects", level: 1) do |heading| %>
    <% heading.with_button(action: :add, text: "New Redirect", href: new_admin_cms_redirect_path) %>
  <% end %>

  <%= render Panda::Core::Admin::TableComponent.new(term: "redirect", rows: redirects, icon: "fa-solid fa-arrow-right") do |table| %>
    <% table.column("Origin Path") { |r| block_link_to r.origin_path, edit_admin_cms_redirect_path(r) } %>
    <% table.column("Destination Path") { |r| r.destination_path } %>
    <% table.column("Status Code") do |r| %>
      <% status_text = r.status_code == 301 ? "Permanent" : "Temporary" %>
      <% status_symbol = r.status_code == 301 ? :active : :pending %>
      <%= render Panda::Core::Admin::TagComponent.new(status: status_symbol, text: "#{r.status_code} â€” #{status_text}") %>
    <% end %>
    <% table.column("Visits") { |r| r.visits } %>
    <% table.column("") do |r| %>
      <%= link_to "Edit", edit_admin_cms_redirect_path(r), class: "text-primary-600 hover:text-primary-700 mr-3" %>
      <%= link_to "Delete", admin_cms_redirect_path(r),
        data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this redirect?" },
        class: "text-red-600 hover:text-red-800" %>
    <% end %>
  <% end %>
<% end %>
