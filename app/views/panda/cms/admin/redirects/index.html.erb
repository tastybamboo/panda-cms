<%= render Panda::Core::Admin::ContainerComponent.new do |component| %>
  <% component.with_heading_slot(text: "Redirects", level: 1) do |heading| %>
    <% heading.with_button(action: :add, text: "New Redirect", href: new_admin_cms_redirect_path) %>
  <% end %>

  <%= render Panda::Core::Admin::TableComponent.new(term: "redirect", rows: redirects, icon: "fa-solid fa-arrow-right") do |table| %>
    <% table.column("Origin Path") { |r| block_link_to r.origin_path, edit_admin_cms_redirect_path(r) } %>
    <% table.column("Destination Path") { |r| r.destination_path } %>
    <% table.column("Status Code") do |r| %>
      <% status_text, status_symbol = case r.status_code
                                     when 301, 308
                                       ["Permanent", :active]
                                     when 302, 307
                                       ["Temporary", :pending]
                                     else
                                       ["Unknown", :pending]
                                     end %>
      <%= render Panda::Core::Admin::TagComponent.new(status: status_symbol, text: "#{r.status_code} â€” #{status_text}") %>
    <% end %>
    <% table.column("Visits") { |r| r.visits.to_s } %>
  <% end %>
<% end %>
