#!/usr/bin/env bash
set -euo pipefail

echo "ğŸ“¦ Installing Ruby gems..."
bundle install

echo "ğŸ“¦ Installing JavaScript deps..."
if [ -f package.json ]; then
  yarn install --silent
fi

echo "ğŸ›  Creating database (if applicable)..."
if [ -f config/database.yml ]; then
  bundle exec rails db:setup || true
fi

echo "ğŸ”§ Installing git hooks via Lefthook..."
if command -v lefthook >/dev/null; then
  lefthook install
else
  echo "â¡ï¸ Install Lefthook for git hooks: https://github.com/evilmartians/lefthook"
fi

echo "ğŸ‰ Setup complete!"
